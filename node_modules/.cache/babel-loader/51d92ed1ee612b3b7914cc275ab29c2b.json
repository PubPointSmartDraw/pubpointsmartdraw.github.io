{"ast":null,"code":"import _classCallCheck from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/src/pubpoint-studio/components/DesignBoard.js\";\n\n/*****************************************************************************\n *\n * PubPoint Smart Draw Web application\n *\n * Developed for PubPoint Strategy by Eng. FEUYAN TCHOUO\n *\n * Copyright (C) PubPoint Strategy - All rights reserved.\n * Unauthorized copying of this file, via any medium is strictly prohibited.\n * Proprietary and confidential.\n * Written by FEUYAN TCHOUO <tca1audricfeuyan@gmail.com>, November 2018.\n *\n *****************************************************************************\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Grid from '@material-ui/core/Grid';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport interactjs from 'interactjs';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Paper from '@material-ui/core/Paper';\nimport Drawer from '@material-ui/core/Drawer';\nimport anime from 'animejs';\nimport ImageAsset from './specific-components/ImageAsset';\nimport ControlBar from './ControlBar';\nimport CreationBoard from './specific-components/CreationBoard';\nimport AssetContextMenu from './specific-components/AssetContextMenu';\nimport AssetMoreOptionPopover from './specific-components/AssetMoreOptionPopover';\nimport AssetEditTextfieldMenu from './specific-components/AssetEditTextfieldMenu';\n/**\n* Composant responsable de la gestion de la zone de création de la vidéo.\n*/\n\nvar DesignBoard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DesignBoard, _Component);\n\n  /**\n  * Constructeur du composant.\n  * @constructor\n  */\n  function DesignBoard(props) {\n    var _this;\n\n    _classCallCheck(this, DesignBoard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DesignBoard).call(this, props));\n\n    _this.handlerDisplayMenuDesignBoardElement = function (e, index) {\n      _this.setState({\n        assetContextMenuOpen: true,\n        assetSelectedIndex: index,\n        assetContextMenuX: e.evt.clientX,\n        assetContextMenuY: e.evt.clientY\n      });\n    };\n\n    _this.handlerCloseMenuDesignBoardElement = function (event) {\n      _this.setState({\n        assetOptionMenuOpen: false,\n        assetOptionMenuAnchorElement: null\n      });\n    };\n\n    _this.preventDefaultBehaviour = function (event) {\n      event.preventDefault();\n    };\n\n    _this.handlerDisplayAssetContextMenu = function (event, index) {\n      _this.setState({\n        assetContextMenuOpen: true,\n        assetSelectedIndex: index\n      });\n    };\n\n    _this.handlerCloseAssetContextMenu = function () {\n      _this.setState({\n        assetContextMenuOpen: false,\n        assetContextMenuAnchorElement: null\n      });\n    };\n\n    _this.handlerCloseAssetMoreOption = function () {\n      _this.setState({\n        assetMoreOptionOpen: false\n      });\n    };\n\n    _this.handlerOpenAssetMoreOption = function () {\n      _this.setState({\n        assetMoreOptionOpen: true\n      });\n    };\n\n    _this.handlerDeleteAsset = function () {\n      _this.props.onSceneObjectDelete(_this.state.assetSelectedIndex);\n\n      _this.setState({\n        assetSelectedIndex: 0\n      });\n    };\n\n    _this.handlerBringAssetForward = function () {\n      _this.props.onSceneObjectBringForward(_this.state.assetSelectedIndex);\n    };\n\n    _this.handlerBringAssetBackward = function () {\n      _this.props.onSceneObjectBringBackward(_this.state.assetSelectedIndex);\n    };\n\n    _this.handlerDisplayMenuTextfield = function (textfield, event) {\n      _this.setState({\n        assetEditTextfieldMenuOpen: true,\n        assetSelectedTextfield: textfield,\n        assetEditTextfieldMenuX: event.evt.clientX + parseInt(textfield.width) / 2,\n        assetEditTextfieldMenuY: event.evt.clientY\n      });\n    };\n\n    _this.handlerGeometricFormClicked = function (geometricForm, event) {\n      _this.setState({\n        assetSelectedTextfield: geometricForm\n      });\n    };\n\n    _this.handlerUpdateTextfield = function (value) {\n      var oldTextfieldValue = _this.state.assetSelectedTextfield;\n\n      if (value.inputText) {\n        oldTextfieldValue.inputText = value.inputText;\n      } else if (value.xValue) {\n        oldTextfieldValue.xValue = value.xValue;\n      } else if (value.yValue) {\n        oldTextfieldValue.yValue = value.yValue;\n      } else if (value.fontSize) {\n        oldTextfieldValue.fontSize = value.fontSize;\n      } else if (value.fontFamily) {\n        oldTextfieldValue.fontFamily = value.fontFamily;\n      } else if (value.color) {\n        oldTextfieldValue.color = value.color;\n      } else if (value.align) {\n        oldTextfieldValue.align = value.align;\n      } else if (value.width) {\n        oldTextfieldValue.width = value.width;\n      }\n\n      _this.setState({\n        assetSelectedTextfield: oldTextfieldValue\n      });\n    };\n\n    _this.handlerCloseAssetEditTextfieldMenuOpen = function () {\n      _this.setState({\n        assetEditTextfieldMenuOpen: false,\n        assetSelectedTextfield: {},\n        assetEditTextfieldMenuX: 0,\n        assetEditTextfieldMenuY: 0\n      });\n    };\n\n    _this.handlerShowGridClicked = function () {\n      _this.setState({\n        showGrid: !_this.state.showGrid\n      });\n    };\n\n    var currentSceneObjects = _this.props.objectList;\n    _this.state = {\n      images: currentSceneObjects,\n      defaultImage: null,\n      selectedShapeName: '',\n      assetContextMenuOpen: false,\n      assetMoreOptionOpen: false,\n      assetEditTextfieldMenuOpen: false,\n      assetEditTextfieldMenuX: 0,\n      assetEditTextfieldMenuY: 0,\n      assetContextMenuX: 0,\n      assetContextMenuY: 0,\n      assetSelectedIndex: 0,\n      assetSelectedTextfield: {},\n      menuOptionDrawerOpen: false,\n      showGrid: false\n    };\n    return _this;\n  }\n  /**\n  * Gestionnaire de l'affichage du menu contextuel d'un objet.\n  * @param {event} event - Source de l'évènement.\n  */\n\n\n  _createClass(DesignBoard, [{\n    key: \"render\",\n\n    /**\n    * Affiche les éléments d'interface du composant.\n    */\n    value: function render() {\n      var assetContextMenuOpen = this.state.assetContextMenuOpen,\n          assetMoreOptionOpen = this.state.assetMoreOptionOpen,\n          assetEditTextfieldMenuOpen = this.state.assetEditTextfieldMenuOpen,\n          assetEditTextfieldMenuX = this.state.assetEditTextfieldMenuX,\n          assetEditTextfieldMenuY = this.state.assetEditTextfieldMenuY,\n          data = this.state.assetSelectedTextfield,\n          assetContextMenuX = this.state.assetContextMenuX,\n          assetContextMenuY = this.state.assetContextMenuY,\n          index = this.state.assetSelectedIndex,\n          menuOptionDrawerOpen = this.state.menuOptionDrawerOpen,\n          showGrid = this.state.showGrid;\n      var enterEffect = \"\",\n          exitEffect = \"\",\n          entranceDelay = 0,\n          exitDelay = 0,\n          entranceDuration = 500,\n          exitDuration = 500;\n\n      if (this.props.objectList.length > index) {\n        enterEffect = this.props.objectList[index].enterEffect;\n        exitEffect = this.props.objectList[index].exitEffect;\n        entranceDelay = this.props.objectList[index].entranceDelay;\n        entranceDuration = this.props.objectList[index].entranceDuration;\n        exitDelay = this.props.objectList[index].exitDelay;\n        exitDuration = this.props.objectList[index].exitDuration;\n      }\n\n      return React.createElement(Grid, {\n        item: true,\n        xs: 9,\n        sm: 9,\n        container: true,\n        className: \"Design-board\",\n        onContextMenu: this.preventDefaultBehaviour,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        className: \"Board\",\n        id: \"board\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(CreationBoard, {\n        objectList: this.props.objectList,\n        onAssetUpdated: this.props.onAssetUpdated,\n        onAssetContextMenuOpen: this.handlerDisplayAssetContextMenu,\n        onAssetClicked: this.handlerDisplayMenuDesignBoardElement,\n        onTextFieldClicked: this.handlerDisplayMenuTextfield,\n        onGeometricFormClicked: this.handlerGeometricFormClicked,\n        onSceneUpdated: this.props.onSceneUpdated,\n        showGrid: showGrid,\n        backgroundSceneColor: this.props.backgroundSceneColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }), React.createElement(AssetContextMenu, {\n        assetOptionMenuOpen: assetContextMenuOpen,\n        onCloseMenuDesignBoardElement: this.handlerCloseAssetContextMenu,\n        anchorPositionX: assetContextMenuX,\n        anchorPositionY: assetContextMenuY,\n        onDeleteAsset: this.handlerDeleteAsset,\n        onBringAssetForward: this.handlerBringAssetForward,\n        onBringAssetBackward: this.handlerBringAssetBackward,\n        onAssetMoreOption: this.handlerOpenAssetMoreOption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }), React.createElement(AssetMoreOptionPopover, {\n        assetOptionMenuOpen: assetMoreOptionOpen,\n        onCloseMenuDesignBoardElement: this.handlerCloseAssetMoreOption,\n        anchorPositionX: 0,\n        anchorPositionY: 0,\n        assetIndex: index,\n        onEnterEffectChange: this.props.onEnterEffectChange,\n        onEntranceDelayChange: this.props.onEntranceDelayChange,\n        onEntranceDurationChange: this.props.onEntranceDurationChange,\n        onExitEffectChange: this.props.onExitEffectChange,\n        onExitDelayChange: this.props.onExitDelayChange,\n        onExitDurationChange: this.props.onExitDurationChange,\n        enterEffect: enterEffect,\n        entranceDelay: entranceDelay,\n        entranceDuration: entranceDuration,\n        exitEffect: exitEffect,\n        exitDelay: exitDelay,\n        exitDuration: exitDuration,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), React.createElement(AssetEditTextfieldMenu, {\n        assetEditTextfieldMenuOpen: assetEditTextfieldMenuOpen,\n        data: data,\n        onCloseEditTextfieldMenu: this.handlerCloseAssetEditTextfieldMenuOpen,\n        anchorPositionX: assetEditTextfieldMenuX,\n        anchorPositionY: assetEditTextfieldMenuY,\n        onEditTextfield: this.handlerUpdateTextfield,\n        onUpdateEditTextfield: this.props.onAssetUpdated,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }), React.createElement(ControlBar, {\n        objectList: this.props.objectList,\n        backgroundSceneColor: this.props.backgroundSceneColor,\n        onSceneBackgroundUpdated: this.props.onSceneUpdated,\n        onShowGridClicked: this.handlerShowGridClicked,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return DesignBoard;\n}(Component);\n\nexport default DesignBoard;","map":{"version":3,"sources":["/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/src/pubpoint-studio/components/DesignBoard.js"],"names":["React","Component","PropTypes","Grid","Popover","Typography","interactjs","ClickAwayListener","MenuItem","MenuList","Paper","Drawer","anime","ImageAsset","ControlBar","CreationBoard","AssetContextMenu","AssetMoreOptionPopover","AssetEditTextfieldMenu","DesignBoard","props","handlerDisplayMenuDesignBoardElement","e","index","setState","assetContextMenuOpen","assetSelectedIndex","assetContextMenuX","evt","clientX","assetContextMenuY","clientY","handlerCloseMenuDesignBoardElement","event","assetOptionMenuOpen","assetOptionMenuAnchorElement","preventDefaultBehaviour","preventDefault","handlerDisplayAssetContextMenu","handlerCloseAssetContextMenu","assetContextMenuAnchorElement","handlerCloseAssetMoreOption","assetMoreOptionOpen","handlerOpenAssetMoreOption","handlerDeleteAsset","onSceneObjectDelete","state","handlerBringAssetForward","onSceneObjectBringForward","handlerBringAssetBackward","onSceneObjectBringBackward","handlerDisplayMenuTextfield","textfield","assetEditTextfieldMenuOpen","assetSelectedTextfield","assetEditTextfieldMenuX","parseInt","width","assetEditTextfieldMenuY","handlerGeometricFormClicked","geometricForm","handlerUpdateTextfield","value","oldTextfieldValue","inputText","xValue","yValue","fontSize","fontFamily","color","align","handlerCloseAssetEditTextfieldMenuOpen","handlerShowGridClicked","showGrid","currentSceneObjects","objectList","images","defaultImage","selectedShapeName","menuOptionDrawerOpen","data","enterEffect","exitEffect","entranceDelay","exitDelay","entranceDuration","exitDuration","length","onAssetUpdated","onSceneUpdated","backgroundSceneColor","onEnterEffectChange","onEntranceDelayChange","onEntranceDurationChange","onExitEffectChange","onExitDelayChange","onExitDurationChange"],"mappings":"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","sourcesContent":["/*****************************************************************************\n *\n * PubPoint Smart Draw Web application\n *\n * Developed for PubPoint Strategy by Eng. FEUYAN TCHOUO\n *\n * Copyright (C) PubPoint Strategy - All rights reserved.\n * Unauthorized copying of this file, via any medium is strictly prohibited.\n * Proprietary and confidential.\n * Written by FEUYAN TCHOUO <tca1audricfeuyan@gmail.com>, November 2018.\n *\n *****************************************************************************\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Grid from '@material-ui/core/Grid';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport interactjs from 'interactjs';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Paper from '@material-ui/core/Paper';\nimport Drawer from '@material-ui/core/Drawer';\nimport anime from 'animejs';\n\nimport ImageAsset from './specific-components/ImageAsset';\nimport ControlBar from './ControlBar';\nimport CreationBoard from './specific-components/CreationBoard';\nimport AssetContextMenu from './specific-components/AssetContextMenu';\nimport AssetMoreOptionPopover from './specific-components/AssetMoreOptionPopover';\nimport AssetEditTextfieldMenu from './specific-components/AssetEditTextfieldMenu';\n\n/**\n* Composant responsable de la gestion de la zone de création de la vidéo.\n*/\nclass DesignBoard extends Component {\n  /**\n  * Constructeur du composant.\n  * @constructor\n  */\n  constructor(props) {\n    super(props);\n    const currentSceneObjects = this.props.objectList;\n    this.state = {\n      images: currentSceneObjects,\n      defaultImage: null,\n      selectedShapeName: '',\n      assetContextMenuOpen: false,\n      assetMoreOptionOpen: false,\n      assetEditTextfieldMenuOpen: false,\n      assetEditTextfieldMenuX: 0,\n      assetEditTextfieldMenuY: 0,\n      assetContextMenuX: 0,\n      assetContextMenuY: 0,\n      assetSelectedIndex: 0,\n      assetSelectedTextfield: {},\n      menuOptionDrawerOpen: false,\n      showGrid: false,\n    };\n  }\n\n  /**\n  * Gestionnaire de l'affichage du menu contextuel d'un objet.\n  * @param {event} event - Source de l'évènement.\n  */\n  handlerDisplayMenuDesignBoardElement = (e, index) => {\n    this.setState({\n      assetContextMenuOpen: true,\n      assetSelectedIndex: index,\n      assetContextMenuX: e.evt.clientX,\n      assetContextMenuY: e.evt.clientY,\n    });\n  };\n  /*handlerDisplayMenuDesignBoardElement = (event) => {\n    event.preventDefault();\n    this.setState({\n      assetOptionMenuOpen: true,\n      assetOptionMenuAnchorElement: event.currentTarget,\n    });\n  };*/\n  /**\n  * Gestionnaire de la fermeture du menu des opérations sur un objet.\n  * @param {event} event - Source de l'évènement.\n  */\n  handlerCloseMenuDesignBoardElement = (event) => {\n    this.setState({\n      assetOptionMenuOpen: false,\n      assetOptionMenuAnchorElement: null,\n    });\n  };\n  /**\n  * Désactive le comportement par défaut d'un évènement.\n  * @param {event} event - Source de l'évènement.\n  */\n  preventDefaultBehaviour = (event) => {\n    event.preventDefault();\n  };\n  /**\n  * Gestionnaire de l'affichage du menu contextuel d'un objet.\n  * @param {event} event - Source de l'évènement.\n  * @param {number} index - Index de l'objet dont on veux afficher le menu contextuel.\n  */\n  handlerDisplayAssetContextMenu = (event, index) => {\n    this.setState({\n      assetContextMenuOpen: true,\n      assetSelectedIndex: index,\n    });\n  };\n  /**\n  *Gestionnaire de la fermeture du menu contextuel d'un objet.\n  */\n  handlerCloseAssetContextMenu = () => {\n    this.setState({\n      assetContextMenuOpen: false,\n      assetContextMenuAnchorElement: null,\n    });\n  };\n  /**\n  * Gestionnaire de la fermeture du menu des opérations sur un objet.\n  */\n  handlerCloseAssetMoreOption = () => {\n    this.setState({\n      assetMoreOptionOpen: false,\n    });\n  };\n  /**\n  * Gestionnaire de l'affichage du menu des opérations sur un objet.\n  */\n  handlerOpenAssetMoreOption = () => {\n    this.setState({\n      assetMoreOptionOpen: true,\n    });\n  };\n  /**\n  * Gestion de la suppression d'un objet sur l'interface de création.\n  */\n  handlerDeleteAsset = () => {\n    this.props.onSceneObjectDelete(this.state.assetSelectedIndex);\n    this.setState({\n      assetSelectedIndex: 0,\n    });\n  };\n  /**\n  * Avance un objet dans le plan de la scène.\n  */\n  handlerBringAssetForward = () => {\n    this.props.onSceneObjectBringForward(this.state.assetSelectedIndex);\n  };\n  /**\n  * Reculer un objet dans le plan de la scène.\n  */\n  handlerBringAssetBackward = () => {\n    this.props.onSceneObjectBringBackward(this.state.assetSelectedIndex);\n  };\n  /**\n  * Afficher le menu contextuel d'une zone de texte et marquer le textfield comme étant sélectionné.\n  * @param {object} textfield - La zone de texte sélectionnée.\n  * @param {event} event - La source de l'évènement.\n  */\n  handlerDisplayMenuTextfield = (textfield, event) => {\n    this.setState({\n      assetEditTextfieldMenuOpen: true,\n      assetSelectedTextfield: textfield,\n      assetEditTextfieldMenuX: event.evt.clientX + (parseInt(textfield.width)/2),\n      assetEditTextfieldMenuY: event.evt.clientY,\n    });\n  };\n\n  /**\n  * Gestionnaire du clic sur une forme géométrique.\n  * @param {object} geometricForm - La forme géométrique sélectionnée.\n  * @param {event} event - La source de l'évènement.\n  */\n  handlerGeometricFormClicked= (geometricForm, event) => {\n    this.setState({\n      assetSelectedTextfield: geometricForm,\n    });\n  };\n\n  /**\n  * Gestionnaire de la mise à jour d'une zone de texte.\n  * @param {object} value - Paramètres à mettre à jour dans la zone de texte.\n  */\n  handlerUpdateTextfield = (value) => {\n    var oldTextfieldValue = this.state.assetSelectedTextfield;\n    if(value.inputText){\n      oldTextfieldValue.inputText = value.inputText;\n\n    }else if(value.xValue){\n      oldTextfieldValue.xValue = value.xValue;\n\n    }else if(value.yValue){\n      oldTextfieldValue.yValue = value.yValue;\n\n    }else if(value.fontSize){\n      oldTextfieldValue.fontSize = value.fontSize;\n\n    }else if(value.fontFamily){\n      oldTextfieldValue.fontFamily = value.fontFamily;\n\n    }else if(value.color){\n      oldTextfieldValue.color = value.color;\n\n    }else if(value.align){\n      oldTextfieldValue.align = value.align;\n\n    }else if(value.width){\n      oldTextfieldValue.width = value.width;\n\n    }\n\n    this.setState({\n      assetSelectedTextfield : oldTextfieldValue,\n    });\n  };\n  /**\n  * Gestionnaire de la fermeture du menu contextuel d'une zone de texte.\n  */\n  handlerCloseAssetEditTextfieldMenuOpen = () => {\n    this.setState({\n      assetEditTextfieldMenuOpen: false,\n      assetSelectedTextfield: {},\n      assetEditTextfieldMenuX: 0,\n      assetEditTextfieldMenuY: 0,\n    });\n  };\n  /**\n  * Gestionnaire de l'affichage des grilles sur l'interface de création.\n  */\n  handlerShowGridClicked = () => {\n    this.setState({\n      showGrid: !this.state.showGrid,\n    });\n  };\n  /**\n  * Affiche les éléments d'interface du composant.\n  */\n  render() {\n\n    const assetContextMenuOpen = this.state.assetContextMenuOpen,\n          assetMoreOptionOpen = this.state.assetMoreOptionOpen,\n          assetEditTextfieldMenuOpen = this.state.assetEditTextfieldMenuOpen,\n          assetEditTextfieldMenuX = this.state.assetEditTextfieldMenuX,\n          assetEditTextfieldMenuY = this.state.assetEditTextfieldMenuY,\n          data = this.state.assetSelectedTextfield,\n          assetContextMenuX = this.state.assetContextMenuX,\n          assetContextMenuY = this.state.assetContextMenuY,\n          index = this.state.assetSelectedIndex,\n          menuOptionDrawerOpen = this.state.menuOptionDrawerOpen,\n          showGrid = this.state.showGrid;\n\n   var enterEffect = \"\", exitEffect = \"\", entranceDelay=0, exitDelay=0, entranceDuration=500, exitDuration=500;\n   if(this.props.objectList.length > index){\n     enterEffect = this.props.objectList[index].enterEffect;\n     exitEffect = this.props.objectList[index].exitEffect;\n     entranceDelay = this.props.objectList[index].entranceDelay;\n     entranceDuration = this.props.objectList[index].entranceDuration;\n     exitDelay = this.props.objectList[index].exitDelay;\n     exitDuration = this.props.objectList[index].exitDuration;\n   }\n\n    return (\n      <Grid item xs={9} sm={9} container className=\"Design-board\" onContextMenu={this.preventDefaultBehaviour}>\n        <Grid className=\"Board\" id=\"board\">\n          <CreationBoard objectList={this.props.objectList}\n                         onAssetUpdated={this.props.onAssetUpdated}\n                         onAssetContextMenuOpen={this.handlerDisplayAssetContextMenu}\n                         onAssetClicked={this.handlerDisplayMenuDesignBoardElement}\n                         onTextFieldClicked={this.handlerDisplayMenuTextfield}\n                         onGeometricFormClicked={this.handlerGeometricFormClicked}\n                         onSceneUpdated={this.props.onSceneUpdated}\n                         showGrid={showGrid}\n                         backgroundSceneColor={this.props.backgroundSceneColor}/>\n\n           <AssetContextMenu assetOptionMenuOpen={assetContextMenuOpen}\n                             onCloseMenuDesignBoardElement={this.handlerCloseAssetContextMenu}\n                             anchorPositionX={assetContextMenuX}\n                             anchorPositionY={assetContextMenuY}\n                             onDeleteAsset={this.handlerDeleteAsset}\n                             onBringAssetForward={this.handlerBringAssetForward}\n                             onBringAssetBackward={this.handlerBringAssetBackward}\n                             onAssetMoreOption={this.handlerOpenAssetMoreOption} />\n\n           <AssetMoreOptionPopover assetOptionMenuOpen={assetMoreOptionOpen}\n                                   onCloseMenuDesignBoardElement={this.handlerCloseAssetMoreOption}\n                                   anchorPositionX={0}\n                                   anchorPositionY={0}\n                                   assetIndex={index}\n                                   onEnterEffectChange={this.props.onEnterEffectChange}\n                                   onEntranceDelayChange={this.props.onEntranceDelayChange}\n                                   onEntranceDurationChange={this.props.onEntranceDurationChange}\n                                   onExitEffectChange={this.props.onExitEffectChange}\n                                   onExitDelayChange={this.props.onExitDelayChange}\n                                   onExitDurationChange={this.props.onExitDurationChange}\n                                   enterEffect={enterEffect}\n                                   entranceDelay={entranceDelay}\n                                   entranceDuration={entranceDuration}\n                                   exitEffect={exitEffect}\n                                   exitDelay={exitDelay}\n                                   exitDuration={exitDuration}/>\n\n         <AssetEditTextfieldMenu assetEditTextfieldMenuOpen={assetEditTextfieldMenuOpen}\n                                 data={data}\n                                 onCloseEditTextfieldMenu={this.handlerCloseAssetEditTextfieldMenuOpen}\n                                 anchorPositionX={assetEditTextfieldMenuX}\n                                 anchorPositionY={assetEditTextfieldMenuY}\n                                 onEditTextfield={this.handlerUpdateTextfield}\n                                 onUpdateEditTextfield={this.props.onAssetUpdated}/>\n\n          <ControlBar objectList={this.props.objectList}\n                      backgroundSceneColor={this.props.backgroundSceneColor}\n                      onSceneBackgroundUpdated={this.props.onSceneUpdated}\n                      onShowGridClicked={this.handlerShowGridClicked}/>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default DesignBoard;\n"]},"metadata":{},"sourceType":"module"}