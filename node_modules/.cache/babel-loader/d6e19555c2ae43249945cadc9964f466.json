{"ast":null,"code":"import _classCallCheck from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/src/pubpoint-studio/components/specific-components/BaseCanvasKonvaImage.js\";\n\n/*****************************************************************************\n *\n * PubPoint Smart Draw Web application\n *\n * Developed for PubPoint Strategy by Eng. FEUYAN TCHOUO\n *\n * Copyright (C) PubPoint Strategy - All rights reserved.\n * Unauthorized copying of this file, via any medium is strictly prohibited.\n * Proprietary and confidential.\n * Written by FEUYAN TCHOUO <tca1audricfeuyan@gmail.com>, November 2018.\n *\n *****************************************************************************\n */\nimport React, { Component } from 'react';\nimport Konva from 'konva';\nimport { render } from 'react-dom';\nimport { Image } from 'react-konva';\n\nvar BaseCanvasKonvaImage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BaseCanvasKonvaImage, _Component);\n\n  function BaseCanvasKonvaImage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BaseCanvasKonvaImage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BaseCanvasKonvaImage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      image: null\n    };\n\n    _this.handleDragEnd = function (e) {\n      var shape = e.target;\n\n      _this.props.onPositionChange(_this.props.assetIndex, {\n        x: shape.x(),\n        y: shape.y()\n      });\n    };\n\n    _this.handleTransformEnd = function (e) {\n      var shape = e.target;\n\n      _this.props.onTransformChange(_this.props.assetIndex, {\n        width: shape.width() * shape.scaleX(),\n        height: shape.height() * shape.scaleY(),\n        rotation: shape.rotation()\n      });\n    };\n\n    _this.handlerOnContextMenuOpen = function (event) {\n      //console.log(event.target);\n      _this.props.onAssetContextMenu(event, _this.props.assetIndex);\n    };\n\n    return _this;\n  }\n\n  _createClass(BaseCanvasKonvaImage, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var image = new window.Image();\n      image.src = this.props.imageSrc;\n\n      image.onload = function () {\n        _this2.setState({\n          image: image\n        });\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Image, {\n        image: this.state.image,\n        name: this.state.src + \"--\" + this.props.assetIndex,\n        type: this.props.type,\n        draggable: true,\n        x: this.props.x,\n        y: this.props.y,\n        width: this.props.width,\n        height: this.props.height,\n        rotation: this.props.rotation,\n        onDragStart: this.handleDragStart,\n        onDragEnd: this.handleDragEnd,\n        onTransformEnd: this.handleTransformEnd,\n        onClick: this.props.onAssetClicked,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return BaseCanvasKonvaImage;\n}(Component);\n\nexport default BaseCanvasKonvaImage;","map":{"version":3,"sources":["/media/audric/Data/Document/PubPoint/dev/sources/React/PubPointSmartDraw/finalApp/pubpointsmartdraw/src/pubpoint-studio/components/specific-components/BaseCanvasKonvaImage.js"],"names":["React","Component","Konva","render","Image","BaseCanvasKonvaImage","state","image","handleDragEnd","e","shape","target","props","onPositionChange","assetIndex","x","y","handleTransformEnd","onTransformChange","width","scaleX","height","scaleY","rotation","handlerOnContextMenuOpen","event","onAssetContextMenu","window","src","imageSrc","onload","setState","type","handleDragStart","onAssetClicked"],"mappings":";;;;;;;AAAA;;;;;;;;;;;;;AAaA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,WAAvB;AACA,SAASC,KAAT,QAAsB,aAAtB;;IAGMC,oB;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE;AADD,K;;UAaTC,a,GAAgB,UAAAC,CAAC,EAAI;AACnB,UAAMC,KAAK,GAAGD,CAAC,CAACE,MAAhB;;AACA,YAAKC,KAAL,CAAWC,gBAAX,CAA4B,MAAKD,KAAL,CAAWE,UAAvC,EAAmD;AACjDC,QAAAA,CAAC,EAAEL,KAAK,CAACK,CAAN,EAD8C;AAEjDC,QAAAA,CAAC,EAAEN,KAAK,CAACM,CAAN;AAF8C,OAAnD;AAID,K;;UAEDC,kB,GAAqB,UAAAR,CAAC,EAAI;AACvB,UAAMC,KAAK,GAAGD,CAAC,CAACE,MAAhB;;AACA,YAAKC,KAAL,CAAWM,iBAAX,CAA6B,MAAKN,KAAL,CAAWE,UAAxC,EAAoD;AAClDK,QAAAA,KAAK,EAAET,KAAK,CAACS,KAAN,KAAgBT,KAAK,CAACU,MAAN,EAD2B;AAElDC,QAAAA,MAAM,EAAEX,KAAK,CAACW,MAAN,KAAiBX,KAAK,CAACY,MAAN,EAFyB;AAGlDC,QAAAA,QAAQ,EAAEb,KAAK,CAACa,QAAN;AAHwC,OAApD;AAKD,K;;UAEDC,wB,GAA2B,UAACC,KAAD,EAAW;AACpC;AACA,YAAKb,KAAL,CAAWc,kBAAX,CAA8BD,KAA9B,EAAqC,MAAKb,KAAL,CAAWE,UAAhD;AACD,K;;;;;;;yCA9BoB;AAAA;;AACnB,UAAMP,KAAK,GAAG,IAAIoB,MAAM,CAACvB,KAAX,EAAd;AACAG,MAAAA,KAAK,CAACqB,GAAN,GAAY,KAAKhB,KAAL,CAAWiB,QAAvB;;AACAtB,MAAAA,KAAK,CAACuB,MAAN,GAAe,YAAM;AACnB,QAAA,MAAI,CAACC,QAAL,CAAc;AACZxB,UAAAA,KAAK,EAAEA;AADK,SAAd;AAGD,OAJD;AAKD;;;6BAwBQ;AACP,aACM,oBAAC,KAAD;AAAO,QAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KAAzB;AACQ,QAAA,IAAI,EAAE,KAAKD,KAAL,CAAWsB,GAAX,GAAe,IAAf,GAAoB,KAAKhB,KAAL,CAAWE,UAD7C;AAEQ,QAAA,IAAI,EAAE,KAAKF,KAAL,CAAWoB,IAFzB;AAGQ,QAAA,SAAS,MAHjB;AAIQ,QAAA,CAAC,EAAE,KAAKpB,KAAL,CAAWG,CAJtB;AAKQ,QAAA,CAAC,EAAE,KAAKH,KAAL,CAAWI,CALtB;AAMQ,QAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWO,KAN1B;AAOQ,QAAA,MAAM,EAAE,KAAKP,KAAL,CAAWS,MAP3B;AAQQ,QAAA,QAAQ,EAAE,KAAKT,KAAL,CAAWW,QAR7B;AASQ,QAAA,WAAW,EAAE,KAAKU,eAT1B;AAUQ,QAAA,SAAS,EAAE,KAAKzB,aAVxB;AAWQ,QAAA,cAAc,EAAE,KAAKS,kBAX7B;AAYQ,QAAA,OAAO,EAAE,KAAKL,KAAL,CAAWsB,cAZ5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADN;AAiBD;;;;EAtDgCjC,S;;AAyDnC,eAAeI,oBAAf","sourcesContent":["/*****************************************************************************\n *\n * PubPoint Smart Draw Web application\n *\n * Developed for PubPoint Strategy by Eng. FEUYAN TCHOUO\n *\n * Copyright (C) PubPoint Strategy - All rights reserved.\n * Unauthorized copying of this file, via any medium is strictly prohibited.\n * Proprietary and confidential.\n * Written by FEUYAN TCHOUO <tca1audricfeuyan@gmail.com>, November 2018.\n *\n *****************************************************************************\n */\nimport React, { Component } from 'react';\nimport Konva from 'konva';\nimport { render } from 'react-dom';\nimport { Image } from 'react-konva';\n\n\nclass BaseCanvasKonvaImage extends Component {\n  state = {\n    image: null,\n  };\n  componentWillMount() {\n    const image = new window.Image();\n    image.src = this.props.imageSrc;\n    image.onload = () => {\n      this.setState({\n        image: image,\n      });\n    };\n  }\n\n handleDragEnd = e => {\n   const shape = e.target;\n   this.props.onPositionChange(this.props.assetIndex, {\n     x: shape.x(),\n     y: shape.y(),\n   });\n };\n\n handleTransformEnd = e => {\n    const shape = e.target;\n    this.props.onTransformChange(this.props.assetIndex, {\n      width: shape.width() * shape.scaleX(),\n      height: shape.height() * shape.scaleY(),\n      rotation: shape.rotation()\n    });\n  };\n\n  handlerOnContextMenuOpen = (event) => {\n    //console.log(event.target);\n    this.props.onAssetContextMenu(event, this.props.assetIndex);\n  };\n\n  render() {\n    return (\n          <Image image={this.state.image}\n                  name={this.state.src+\"--\"+this.props.assetIndex}\n                  type={this.props.type}\n                  draggable\n                  x={this.props.x}\n                  y={this.props.y}\n                  width={this.props.width}\n                  height={this.props.height}\n                  rotation={this.props.rotation}\n                  onDragStart={this.handleDragStart}\n                  onDragEnd={this.handleDragEnd}\n                  onTransformEnd={this.handleTransformEnd}\n                  onClick={this.props.onAssetClicked}\n                  />\n\n    );\n  }\n}\n\nexport default BaseCanvasKonvaImage;\n"]},"metadata":{},"sourceType":"module"}